<ng-template [ngIf]="gameData">
  <div class="media-header">
    <div class="media-image">
      <span [ngClass]="{ bookmark: true, visible: inUserCollection }">
        <ng-icon name="ionBookmark" size="24"></ng-icon>
      </span>
      <img src="assets/no_cover_placeholder.jpg" alt="Cover" />
    </div>
    <div class="media-info">
      <h1>{{ gameData.title }}</h1>
      <div class="media-data">
        <span>
          Platform:
          <b>{{ gameData.platform }}</b>
        </span>
        <span class="data-divider">|</span>
        <span>
          In
          <b>{{ gameData.saved_by.length }}</b>
          {{ gameData.saved_by.length === 1 ? 'collection' : 'collections' }}
        </span>
      </div>
    </div>
    <button
      *ngIf="!inUserCollection"
      class="media-button add"
      (click)="addToCollection()">
      <ng-icon name="ionAdd" size="36"></ng-icon>
      <span class="media-button-title">Add</span>
    </button>
    <button
      *ngIf="inUserCollection"
      class="media-button remove"
      (click)="removeFromCollection()">
      <ng-icon name="ionRemove" size="36"></ng-icon>
      <span class="media-button-title">Remove</span>
    </button>
  </div>
  <form
    *ngIf="gameForm"
    [formGroup]="gameForm"
    [ngClass]="{ 'form-group': true, disabled: !inUserCollection }">
    <div class="form-header">
      <h2>Your Details</h2>
      <p-button
        [disabled]="!inUserCollection || !hasFormChanged"
        class="p-button-success"
        label="Save"
        icon="pi pi-check"
        styleClass="p-button-sm"
        (click)="updateData()"></p-button>
    </div>
    <div class="form-selection">
      <span class="form-container">
        <h3>Media form</h3>
        <p-selectButton
          [options]="selectItems.format"
          formControlName="format"></p-selectButton>
      </span>
      <span class="form-container">
        <h3>Progress</h3>
        <p-selectButton
          [options]="selectItems.progress"
          formControlName="progress"></p-selectButton>
      </span>
    </div>
    <div class="form-notes">
      <span class="form-container">
        <h3>Notes</h3>
        <textarea
          pInputTextarea
          rows="3"
          cols="30"
          formControlName="notes"></textarea>
      </span>
    </div>
  </form>
</ng-template>
